!function(){"use strict";var e,t,n,a,l,r,i={944:function(e,t){var n=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var a,l=0,r=t.length;l<r;l++)!a&&l in t||(a||(a=Array.prototype.slice.call(t,0,l)),a[l]=t[l]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.MetalDataSet=t.Metal=void 0;var a=function(){function e(e,t,n,a){this.name=e,this.symbol=t,this.affinity=n,this.bufferedMetalConcentration=a,this.idSuffix=t.toLowerCase(),this._defaultAffinity=n,this._defaultMetalConcentration=a}return e.prototype.calculateDeltaG=function(e){return 8.314*298.15*Math.log(e)/1e3},e.prototype.checkRange=function(e,t){if(isNaN(e))throw new RangeError(t+" must be a valid number");if(e<1e-30||e>1e3)throw new RangeError(t+" must be between 1e-30 and 1000")},Object.defineProperty(e.prototype,"affinity",{get:function(){return this._affinity},set:function(e){this.checkRange(e,"Affinity"),this._affinity=e,this._metalationDeltaG=this.calculateDeltaG(this._affinity)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metalationDeltaG",{get:function(){return this._metalationDeltaG},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferedMetalConcentration",{get:function(){return this._bufferedMetalConcentration},set:function(e){this.checkRange(e,"Buffered metal concentration"),this._bufferedMetalConcentration=e,this._intracellularAvailableDeltaG=this.calculateDeltaG(this._bufferedMetalConcentration)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultMetalConcentration",{set:function(e){this.checkRange(e,"Default buffered metal concentration"),this._defaultMetalConcentration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"intracellularAvailableDeltaG",{get:function(){return this._intracellularAvailableDeltaG},set:function(e){if(e<=0)throw new RangeError("Intracellular available ∆G must be > 0");this._intracellularAvailableDeltaG=e},enumerable:!1,configurable:!0}),e.prototype.getProperty=function(e){return this[e]},e.prototype.switchOffMetal=function(){this.affinity=1e3,this.bufferedMetalConcentration=this._defaultMetalConcentration},e.prototype.resetValues=function(){this.affinity=this._defaultAffinity,this.bufferedMetalConcentration=this._defaultMetalConcentration},e}();t.Metal=a;var l=[["Magnesium","Mg",1e3,.0027],["Manganese","Mn",1e3,26e-7],["Iron","Fe",1e-6,48e-9],["Cobalt","Co",3e-11,2.5e-9],["Nickel","Ni",9.8e-10,18e-14],["Copper","Cu",24e-17,12e-19],["Zinc","Zn",19e-14,119e-14]],r=function(){function e(e){this.title=e,this.metals={};for(var t=0,r=l;t<r.length;t++){var i=r[t];this.metals[i[1].toLowerCase()]=new(a.bind.apply(a,n([void 0],i,!1)))}}return Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(e){var t=document.createElement("div");t.innerHTML=e,t.innerText!=e&&Array.from(t.children).forEach((function(t){if("EM"!=t.tagName)throw new Error("Invalid HTML string "+e)})),this._title=e},enumerable:!1,configurable:!0}),e.prototype.calculateOccupancy=function(){var e={},t=0;for(var n in this.metals){var a=this.metals[n];e[n]=Math.exp(1e3*(a.intracellularAvailableDeltaG-a.metalationDeltaG)/(8.314*298.15)),t+=e[n]}var l={},r=0;for(var n in this.metals)l[n]=e[n]/(1+t),r+=l[n];return l.total=r,l},e}();t.MetalDataSet=r}},o={};function c(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return i[e].call(n.exports,n,n.exports,c),n.exports}c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,{a:t}),t},c.d=function(e,t){for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e=window.wp.blocks,t=window.wp.element,n=window.wp.blockEditor,a=window.wp.components,l=window.React,r=c.n(l),(0,e.registerBlockType)("metalation-calculator-wp/calculator",{edit:function(e){let{attributes:l,setAttributes:i,clientId:o}=e;r().useEffect((()=>{l.id||i({id:"mc_"+o})}),[]);const u=new(c(944).MetalDataSet),s=/^\d+\.?\d*((e|E)-?\d*)?$/,f=Object.keys(u.metals).map((e=>(0,t.createElement)("tr",{key:e},(0,t.createElement)("th",null,u.metals[e].symbol),(0,t.createElement)("td",null,u.metals[e].affinity),(0,t.createElement)("td",null,"-"),(0,t.createElement)("td",null,(0,t.createElement)(a.TextControl,{value:l.bmcVals[e],onChange:t=>function(e,t){const n=document.getElementById("msg_"+t);let a=!0;try{u.metals[t].bufferedMetalConcentration=e,n.style.display="none"}catch(t){let l;l=t instanceof RangeError?t.message:"Invalid value "+e,n.innerHTML=l,n.style.display="block",s.test(e)||(a=!1)}if(a){const n={...l.bmcVals};n[t]=e,i({bmcVals:n})}}(t,e)}),(0,t.createElement)("p",{className:"error-msg",id:"msg_"+e,style:{display:"none"}})),(0,t.createElement)("td",null,"-"),(0,t.createElement)("td",null,"-"))));return(0,t.createElement)("div",(0,n.useBlockProps)(),(0,t.createElement)("div",{className:"metalation-calculator"},(0,t.createElement)("p",null,"To predict the metalation state of a protein or molecule, fill in values in the table for as many determined metal affinities (and availabilities if known) as possible."),(0,t.createElement)("div",{className:"metalation-table-header"},(0,t.createElement)("div",null,(0,t.createElement)(n.RichText,{tagName:"h3",value:l.title,allowedFormats:["core/italic"],onChange:e=>i({title:e}),placeholder:"Enter title here, e.g. Idealised Salmonella",className:"metalation-table-title main-title"}),(0,t.createElement)("h4",{className:"metalation-table-title"},"(Default Settings for Metal Availability)"))),(0,t.createElement)("table",{className:"metalation-table"},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("td",null),(0,t.createElement)("th",null,"Metal Affinity (M)"),(0,t.createElement)("th",null,"∆G (kJ mol",(0,t.createElement)("sup",null,"-1"),")"),(0,t.createElement)("th",null,"Metal Availability (M)"),(0,t.createElement)("th",null,"Available ∆G (kJ mol",(0,t.createElement)("sup",null,"-1"),")"),(0,t.createElement)("th",null,"Occupancy"))),(0,t.createElement)("tbody",null,f),(0,t.createElement)("tfoot",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",null,"Total Metalation"),(0,t.createElement)("td",null),(0,t.createElement)("td",null),(0,t.createElement)("td",null),(0,t.createElement)("td",null),(0,t.createElement)("th",{className:"result"},"-"))))))}})}();